{#
  Parameters:
    - "aria_label" (string) (default: 'Pagination navigation')
    - "previous" (array): Page link for the previous page; not present on the first page
    - "first" (array): Page link for the first page; not present on the first page of results.
    - "last" (array): Page link for the last page; not present on the last page of results.
    - "next" (array): Page link for the next page; not present on the last page of results.
      Each of the page link variables which are listed above contain following elements:
        - href: URL with appropriate query parameters.
        - text: The visible text used for the page link.
        - title: The text used for filling the 'title' property of a given tag.
    - "pages" (array): List of the pager page links.
      The list is keyed with ordered page numbers and each item contatin following elements:
        - href: URL with appropriate query parameters.
        - text: The visible text used for the page link.
        - title: The text used for filling the 'title' property of a given tag.
    - "current_page" (integer)  (default: 1): page currently displayed
    - "max_page" (integer) (default: 0): total number of pages
    - "label_page" (string) (default: 'Page'): page label displayed on small screens
    - "extra_classes" (string) (default: '')
    - "extra_attributes" (array) (default: []): format: [
        {
          "name" (string) (default: ''),
          "value" (string) (default: '')
        },
        ...
      ]
#}

{# Internal properties #}

{% set aria_label = aria_label|default('Pagination navigation') %}
{% set current_page = current_page|default(1) %}
{% set max_page = max_page|default(0) %}
{% set label_page = label_page|default('Page') %}
{% set previous = previous|default({})|merge({
    'title': previous.title|default('Go to previous page'),
    'text': previous.text|default('‹ Previous')
  })
%}
{% set next = next|default({})|merge({
    'title': next.title|default('Go to next page'),
    'text': next.text|default('Next ›')
  })
%}
{% set _css_class = 'ecl-pager__list' %}
{% set _extra_attributes = '' %}

{# Internal logic - Process properties #}

{% if extra_classes is defined and extra_classes is not empty %}
  {% set _css_class = _css_class ~ ' ' ~ extra_classes %}
{% endif %}

{% if extra_attributes is defined and extra_attributes is not empty and extra_attributes is iterable %}
  {% for attr in extra_attributes %}
    {% set _extra_attributes = _extra_attributes ~ ' ' ~ attr.name ~ '="' ~ attr.value ~ '"' %}
  {% endfor %}
{% endif %}

{# Print the result #}

<nav class="ecl-pager" aria-label="{{ aria_label }}">
  <ul class="{{ _css_class }}" {{ _extra_attributes|raw }}>
    {# Print the previous page link. #}
    {% if current_page > 1 %}
      <li class="ecl-pager__item ecl-pager__item--previous">
        <a class="ecl-pager__link" title="{{ previous.title }}" href="{{ previous.href }}">{{ previous.text }}</a>
      </li>
    {% endif %}

    {# Print the first page link. #}
    {% if first %}
      <li class="ecl-pager__item ecl-pager__item--first">
        <a class="ecl-pager__link" title="{{ first.title }}" href="{{ first.href }}">
          <span class="ecl-u-sr-only" >{{ first.text }}</span>
          {{ first.text }}
        </a>
      </li>
    {% endif %}

    {# Print the left ellipsis. #}
    {% if current_page > 4 %}
      <li class="ecl-pager__item ecl-pager__item--ellipsis">…</li>
    {% endif %}

    {# Print page links. #}
    {% for key, page in pages %}
      {# Print the current page element. #}
      {% if current_page == key %}
        <li class="ecl-pager__item ecl-pager__item--current" aria-current="page">
          <span class="ecl-pager__item-text" >{{ label_page }} </span>{{ page.text }}
        </li>
      {% else %}
        <li class="ecl-pager__item">
          <a class="ecl-pager__link" title="{{ page.title }}" href="{{ page.href }}">
            <span class="ecl-u-sr-only" >{{ label_page }} </span>{{ page.text }}
          </a>
        </li>
      {% endif %}
    {% endfor %}

    {# Print the right 'ellipsis'. #}
    {% if max_page - current_page > 3 %}
      <li class="ecl-pager__item ecl-pager__item--ellipsis">…</li>
    {% endif %}

    {# Print the last page link. #}
    {% if last %}
      <li class="ecl-pager__item ecl-pager__item--last">
        <a class="ecl-pager__link" title="{{ last.title }}" href="{{ last.href }}">
          <span class="ecl-u-sr-only" >{{ last.text }} </span>
          {{ last.text }}
        </a>
      </li>
    {% endif %}

    {# Print the next page link. #}
    {% if current_page != max_page %}
      <li class="ecl-pager__item ecl-pager__item--next">
        <a class="ecl-pager__link" title="{{ next.title }}" href="{{ next.href }}">{{ next.text }}</a>
      </li>
    {% endif %}
  </ul>
</nav>
