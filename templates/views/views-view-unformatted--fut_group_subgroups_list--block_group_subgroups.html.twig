{#
/**
 * @file
 * Theme override to display a view of unformatted rows.
 *
 * Available variables:
 * - title: The title of this group of rows. May be empty.
 * - rows: A list of the view's row items.
 *   - attributes: The row's HTML attributes.
 *   - content: The row's content.
 * - view: The view object.
 * - default_row_class: A flag indicating whether default classes should be
 *   used on rows.
 *
 * @see template_preprocess_views_view_unformatted()
 */
 
#}

{{ attach_library('blellow/show_hide_subgroups') }}

{% if title %}
  <h3>{{ title }}</h3>
{% endif %}
<div class="views-row-wrapper">
  {% set footer = '' %}
  {% for row in rows %}
    {% if loop.index <= 4 %} 
      <div {{ row.attributes.addClass(['views-row', 'ecl-list-item']) }}>{{ row.content }}</div> 
    {% endif %} 
    {% if loop.index > 4 %} 
      {% set footer %}
        <footer>
          <a href="#" id="show_subgroups" class="views-display-link views-display-link-page_group_subgroups" onclick="show_subgroups()";>See all subgroups</a>
          <a href="#" id="hide_subgroups" class="views-display-link views-display-link-page_group_subgroups" style="display:none" onclick="hide_subgroups()";>Hide all subgroups</a>
        </footer>
      {% endset %}
      <div{{ row.attributes.addClass(['hide']) }} style="display: none;">{{ row.content }}</div>
    {% endif %}
  {% endfor %}
</div>
{{ footer }}